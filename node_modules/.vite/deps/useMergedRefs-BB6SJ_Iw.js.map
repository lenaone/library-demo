{"version":3,"file":"useMergedRefs-BB6SJ_Iw.js","names":["canUseDOM","options","options","options","canUseDOM","useCommittedRef","useLayoutEffect","useEffect"],"sources":["../../dom-helpers/esm/canUseDOM.js","../../dom-helpers/esm/addEventListener.js","../../dom-helpers/esm/contains.js","../../dom-helpers/esm/removeEventListener.js","../../dom-helpers/esm/listen.js","../../dom-helpers/esm/ownerDocument.js","../../@restart/ui/esm/useWindow.js","../../@restart/hooks/esm/useCommittedRef.js","../../@restart/hooks/esm/useEventCallback.js","../../@restart/hooks/esm/useIsomorphicEffect.js","../../@restart/hooks/esm/useMergedRefs.js"],"sourcesContent":["export default !!(typeof window !== 'undefined' && window.document && window.document.createElement);","/* eslint-disable no-return-assign */\nimport canUseDOM from './canUseDOM';\nexport var optionsSupported = false;\nexport var onceSupported = false;\n\ntry {\n  var options = {\n    get passive() {\n      return optionsSupported = true;\n    },\n\n    get once() {\n      // eslint-disable-next-line no-multi-assign\n      return onceSupported = optionsSupported = true;\n    }\n\n  };\n\n  if (canUseDOM) {\n    window.addEventListener('test', options, options);\n    window.removeEventListener('test', options, true);\n  }\n} catch (e) {\n  /* */\n}\n\n/**\n * An `addEventListener` ponyfill, supports the `once` option\n * \n * @param node the element\n * @param eventName the event name\n * @param handle the handler\n * @param options event options\n */\nfunction addEventListener(node, eventName, handler, options) {\n  if (options && typeof options !== 'boolean' && !onceSupported) {\n    var once = options.once,\n        capture = options.capture;\n    var wrappedHandler = handler;\n\n    if (!onceSupported && once) {\n      wrappedHandler = handler.__once || function onceHandler(event) {\n        this.removeEventListener(eventName, onceHandler, capture);\n        handler.call(this, event);\n      };\n\n      handler.__once = wrappedHandler;\n    }\n\n    node.addEventListener(eventName, wrappedHandler, optionsSupported ? options : capture);\n  }\n\n  node.addEventListener(eventName, handler, options);\n}\n\nexport default addEventListener;","/* eslint-disable no-bitwise, no-cond-assign */\n\n/**\n * Checks if an element contains another given element.\n * \n * @param context the context element\n * @param node the element to check\n */\nexport default function contains(context, node) {\n  // HTML DOM and SVG DOM may have different support levels,\n  // so we need to check on context instead of a document root element.\n  if (context.contains) return context.contains(node);\n  if (context.compareDocumentPosition) return context === node || !!(context.compareDocumentPosition(node) & 16);\n}","/**\n * A `removeEventListener` ponyfill\n * \n * @param node the element\n * @param eventName the event name\n * @param handle the handler\n * @param options event options\n */\nfunction removeEventListener(node, eventName, handler, options) {\n  var capture = options && typeof options !== 'boolean' ? options.capture : options;\n  node.removeEventListener(eventName, handler, capture);\n\n  if (handler.__once) {\n    node.removeEventListener(eventName, handler.__once, capture);\n  }\n}\n\nexport default removeEventListener;","import addEventListener from './addEventListener';\nimport removeEventListener from './removeEventListener';\n\nfunction listen(node, eventName, handler, options) {\n  addEventListener(node, eventName, handler, options);\n  return function () {\n    removeEventListener(node, eventName, handler, options);\n  };\n}\n\nexport default listen;","/**\n * Returns the owner document of a given element.\n * \n * @param node the element\n */\nexport default function ownerDocument(node) {\n  return node && node.ownerDocument || document;\n}","import { createContext, useContext } from 'react';\nimport canUseDOM from 'dom-helpers/canUseDOM';\nconst Context = /*#__PURE__*/createContext(canUseDOM ? window : undefined);\nexport const WindowProvider = Context.Provider;\n\n/**\n * The document \"window\" placed in React context. Helpful for determining\n * SSR context, or when rendering into an iframe.\n *\n * @returns the current window\n */\nexport default function useWindow() {\n  return useContext(Context);\n}","import { useEffect, useRef } from 'react';\n\n/**\n * Creates a `Ref` whose value is updated in an effect, ensuring the most recent\n * value is the one rendered with. Generally only required for Concurrent mode usage\n * where previous work in `render()` may be discarded before being used.\n *\n * This is safe to access in an event handler.\n *\n * @param value The `Ref` value\n */\nfunction useCommittedRef(value) {\n  const ref = useRef(value);\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref;\n}\nexport default useCommittedRef;","import { useCallback } from 'react';\nimport useCommittedRef from './useCommittedRef';\nexport default function useEventCallback(fn) {\n  const ref = useCommittedRef(fn);\n  return useCallback(function (...args) {\n    return ref.current && ref.current(...args);\n  }, [ref]);\n}","import { useEffect, useLayoutEffect } from 'react';\nconst isReactNative = typeof global !== 'undefined' &&\n// @ts-ignore\nglobal.navigator &&\n// @ts-ignore\nglobal.navigator.product === 'ReactNative';\nconst isDOM = typeof document !== 'undefined';\n\n/**\n * Is `useLayoutEffect` in a DOM or React Native environment, otherwise resolves to useEffect\n * Only useful to avoid the console warning.\n *\n * PREFER `useEffect` UNLESS YOU KNOW WHAT YOU ARE DOING.\n *\n * @category effects\n */\nexport default isDOM || isReactNative ? useLayoutEffect : useEffect;","import { useMemo } from 'react';\nconst toFnRef = ref => !ref || typeof ref === 'function' ? ref : value => {\n  ref.current = value;\n};\nexport function mergeRefs(refA, refB) {\n  const a = toFnRef(refA);\n  const b = toFnRef(refB);\n  return value => {\n    if (a) a(value);\n    if (b) b(value);\n  };\n}\n\n/**\n * Create and returns a single callback ref composed from two other Refs.\n *\n * ```tsx\n * const Button = React.forwardRef((props, ref) => {\n *   const [element, attachRef] = useCallbackRef<HTMLButtonElement>();\n *   const mergedRef = useMergedRefs(ref, attachRef);\n *\n *   return <button ref={mergedRef} {...props}/>\n * })\n * ```\n *\n * @param refA A Callback or mutable Ref\n * @param refB A Callback or mutable Ref\n * @category refs\n */\nfunction useMergedRefs(refA, refB) {\n  return useMemo(() => mergeRefs(refA, refB), [refA, refB]);\n}\nexport default useMergedRefs;"],"mappings":"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"}